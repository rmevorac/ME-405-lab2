<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lab #2: src/main.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Lab #2<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Lab #2: Out of Control</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('main_8py.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file implements the main function for a motor control system.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac30c8c210dabd7a385b28b6021f2df34"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#ac30c8c210dabd7a385b28b6021f2df34">main.get_inputs</a> ()</td></tr>
<tr class="memdesc:ac30c8c210dabd7a385b28b6021f2df34"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function reads the user's input for the KP and setpoint values from the decoder.  <br /></td></tr>
<tr class="separator:ac30c8c210dabd7a385b28b6021f2df34"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0470c60385ccc3632d48ebb3f9aca9dc"><td class="memItemLeft" align="right" valign="top"><a id="a0470c60385ccc3632d48ebb3f9aca9dc" name="a0470c60385ccc3632d48ebb3f9aca9dc"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.u2</b> = pyb.UART(2, baudrate=115200)</td></tr>
<tr class="memdesc:a0470c60385ccc3632d48ebb3f9aca9dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up the USB-serial port for streaming data. <br /></td></tr>
<tr class="separator:a0470c60385ccc3632d48ebb3f9aca9dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a199100edd0090728cb79f1505b6a2743"><td class="memItemLeft" align="right" valign="top"><a id="a199100edd0090728cb79f1505b6a2743" name="a199100edd0090728cb79f1505b6a2743"></a>
MotorDriver&#160;</td><td class="memItemRight" valign="bottom"><b>main.motor1</b> = MotorDriver(Pin.board.PC1, Pin.board.PA0, Pin.board.PA1, 5)</td></tr>
<tr class="memdesc:a199100edd0090728cb79f1505b6a2743"><td class="mdescLeft">&#160;</td><td class="mdescRight">The creation of the motor object. <br /></td></tr>
<tr class="separator:a199100edd0090728cb79f1505b6a2743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87fdac18f7a1444924085943a8234e19"><td class="memItemLeft" align="right" valign="top"><a id="a87fdac18f7a1444924085943a8234e19" name="a87fdac18f7a1444924085943a8234e19"></a>
Encoder&#160;</td><td class="memItemRight" valign="bottom"><b>main.encoder1</b> = Encoder(Pin.board.PB6, Pin.board.PB7, 4)</td></tr>
<tr class="memdesc:a87fdac18f7a1444924085943a8234e19"><td class="mdescLeft">&#160;</td><td class="mdescRight">The creation of the encoder object. <br /></td></tr>
<tr class="separator:a87fdac18f7a1444924085943a8234e19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43b21e9ea11c181553e5882fc843e85c"><td class="memItemLeft" align="right" valign="top"><a id="a43b21e9ea11c181553e5882fc843e85c" name="a43b21e9ea11c181553e5882fc843e85c"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>main.updated_params</b> = get_inputs()</td></tr>
<tr class="memdesc:a43b21e9ea11c181553e5882fc843e85c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inputs from decoder. <br /></td></tr>
<tr class="separator:a43b21e9ea11c181553e5882fc843e85c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46a5d5062114b708b96b0850aca34b19"><td class="memItemLeft" align="right" valign="top"><a id="a46a5d5062114b708b96b0850aca34b19" name="a46a5d5062114b708b96b0850aca34b19"></a>
Controller&#160;</td><td class="memItemRight" valign="bottom"><b>main.controller1</b> = Controller(updated_params[0] , updated_params[1], motor1, encoder1)</td></tr>
<tr class="memdesc:a46a5d5062114b708b96b0850aca34b19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Once motor, encoder and params are collected they are used to create this controller object. <br /></td></tr>
<tr class="separator:a46a5d5062114b708b96b0850aca34b19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129bda823cbb62ffb698427de27e0d56"><td class="memItemLeft" align="right" valign="top"><a id="a129bda823cbb62ffb698427de27e0d56" name="a129bda823cbb62ffb698427de27e0d56"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>main.try</b> :</td></tr>
<tr class="separator:a129bda823cbb62ffb698427de27e0d56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file implements the main function for a motor control system. </p>
<p>The system consists of a motor, encoder, and a controller. The motor is driven by a <code>MotorDriver</code> object and the encoder is read by an <code>Encoder</code> object. The system reads the KP and setpoint values from the decoder (other computer) and updates the motor accordingly using the Controller object. The motor data is written to the second USB-serial port.</p>
<dl class="section author"><dt>Author</dt><dd>Ben Elkayam </dd>
<dd>
Roey Mevorach </dd>
<dd>
Ermias Yemane</dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-Feb-10 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ac30c8c210dabd7a385b28b6021f2df34" name="ac30c8c210dabd7a385b28b6021f2df34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac30c8c210dabd7a385b28b6021f2df34">&#9670;&#160;</a></span>get_inputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def main.get_inputs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function reads the user's input for the KP and setpoint values from the decoder. </p>
<p>The function creates a UART object on port 2 with a baudrate of 115200 and a timeout of 5 seconds. It then waits for input from the serial communication and reads the KP and setpoint values. Finally, it closes the serial communication and returns a tuple of the KP and setpoint values. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A tuple of the KP and setpoint values. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="main_8py.html">main.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
