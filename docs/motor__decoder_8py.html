<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lab #2: src/motor_decoder.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Lab #2<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Lab #2: Out of Control</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('motor__decoder_8py.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">motor_decoder.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file processes the data from an encoder for readability and motor control.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a63f93c67b2005a196716bd3fabff129b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor__decoder_8py.html#a63f93c67b2005a196716bd3fabff129b">motor_decoder.get_params</a> ()</td></tr>
<tr class="memdesc:a63f93c67b2005a196716bd3fabff129b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompts the user to enter KP and setpoint values.  <br /></td></tr>
<tr class="separator:a63f93c67b2005a196716bd3fabff129b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad4249d55ef07f6467f4e45ee78690093"><td class="memItemLeft" align="right" valign="top"><a id="ad4249d55ef07f6467f4e45ee78690093" name="ad4249d55ef07f6467f4e45ee78690093"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>motor_decoder.databx</b> = []</td></tr>
<tr class="memdesc:ad4249d55ef07f6467f4e45ee78690093"><td class="mdescLeft">&#160;</td><td class="mdescRight">A list to store the x-axis position data. <br /></td></tr>
<tr class="separator:ad4249d55ef07f6467f4e45ee78690093"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81314c98349e622fd7b6bd017493e773"><td class="memItemLeft" align="right" valign="top"><a id="a81314c98349e622fd7b6bd017493e773" name="a81314c98349e622fd7b6bd017493e773"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>motor_decoder.databy</b> = []</td></tr>
<tr class="memdesc:a81314c98349e622fd7b6bd017493e773"><td class="mdescLeft">&#160;</td><td class="mdescRight">A list to store the y-axis position data. <br /></td></tr>
<tr class="separator:a81314c98349e622fd7b6bd017493e773"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab00d3914aabd1391ae254159c97e24b3"><td class="memItemLeft" align="right" valign="top"><a id="ab00d3914aabd1391ae254159c97e24b3" name="ab00d3914aabd1391ae254159c97e24b3"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>motor_decoder.params</b> = get_params()</td></tr>
<tr class="memdesc:ab00d3914aabd1391ae254159c97e24b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompting user for KP and setpoint. <br /></td></tr>
<tr class="separator:ab00d3914aabd1391ae254159c97e24b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98187aa76cd77811e087bf1de6ca4893"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor__decoder_8py.html#a98187aa76cd77811e087bf1de6ca4893">motor_decoder.timeout</a></td></tr>
<tr class="memdesc:a98187aa76cd77811e087bf1de6ca4893"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sending user input to controller.  <br /></td></tr>
<tr class="separator:a98187aa76cd77811e087bf1de6ca4893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2515de620c7143128d6ca731b1d71f0b"><td class="memItemLeft" align="right" valign="top">ser&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor__decoder_8py.html#a2515de620c7143128d6ca731b1d71f0b">motor_decoder.line</a> = ser.readline()</td></tr>
<tr class="memdesc:a2515de620c7143128d6ca731b1d71f0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flushing the input buffer of the serial port.  <br /></td></tr>
<tr class="separator:a2515de620c7143128d6ca731b1d71f0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad87600d952ece4682d2a6f134945bbd1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor__decoder_8py.html#ad87600d952ece4682d2a6f134945bbd1">motor_decoder.try</a> :</td></tr>
<tr class="memdesc:ad87600d952ece4682d2a6f134945bbd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checking if the line read is equal to 'end'.  <br /></td></tr>
<tr class="separator:ad87600d952ece4682d2a6f134945bbd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4331954924276975c5d821f8cc201f3"><td class="memItemLeft" align="right" valign="top"><a id="af4331954924276975c5d821f8cc201f3" name="af4331954924276975c5d821f8cc201f3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>motor_decoder.tempx</b></td></tr>
<tr class="memdesc:af4331954924276975c5d821f8cc201f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Splitting the received line on ',' to get the x and y position data. <br /></td></tr>
<tr class="separator:af4331954924276975c5d821f8cc201f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a867aa0caf70bafc0e61f79ad4da4e635"><td class="memItemLeft" align="right" valign="top"><a id="a867aa0caf70bafc0e61f79ad4da4e635" name="a867aa0caf70bafc0e61f79ad4da4e635"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>motor_decoder.tempy</b></td></tr>
<tr class="separator:a867aa0caf70bafc0e61f79ad4da4e635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a33442ad5561c10d5b284cc2828ffa"><td class="memItemLeft" align="right" valign="top"><a id="a78a33442ad5561c10d5b284cc2828ffa" name="a78a33442ad5561c10d5b284cc2828ffa"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>motor_decoder.except</b> :</td></tr>
<tr class="memdesc:a78a33442ad5561c10d5b284cc2828ffa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appending the received x and y position data to their respective lists. <br /></td></tr>
<tr class="separator:a78a33442ad5561c10d5b284cc2828ffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac801afeee6b8d8caa662d6cd559ff56a"><td class="memItemLeft" align="right" valign="top">array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor__decoder_8py.html#ac801afeee6b8d8caa662d6cd559ff56a">motor_decoder.datax</a> = array.array('f', [0] * len(databx))</td></tr>
<tr class="memdesc:ac801afeee6b8d8caa662d6cd559ff56a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Printing an error message in case of any error while reading the line.  <br /></td></tr>
<tr class="separator:ac801afeee6b8d8caa662d6cd559ff56a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af63aecc67a6d54b3cbab7128e960ee3b"><td class="memItemLeft" align="right" valign="top"><a id="af63aecc67a6d54b3cbab7128e960ee3b" name="af63aecc67a6d54b3cbab7128e960ee3b"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>motor_decoder.datay</b> = array.array('f', [0] * len(databy))</td></tr>
<tr class="separator:af63aecc67a6d54b3cbab7128e960ee3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file processes the data from an encoder for readability and motor control. </p>
<p>It collects the position data in real-time from the serial port and plots the data using the matplotlib library. The main function of the script initializes the serial port and then prompts the user for KP and setpoint values. These values are then sent to microcontroller and the controller is run with those input values. Position and time values are then received in real time from the microcontroller. The received data is processed and then plotted, with time on the x-axis and position on the y-axis. The final plot is displayed to the user.</p>
<dl class="section author"><dt>Author</dt><dd>Ben Elkayam </dd>
<dd>
Roey Mevorach </dd>
<dd>
Ermias Yemane</dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-Feb-10 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a63f93c67b2005a196716bd3fabff129b" name="a63f93c67b2005a196716bd3fabff129b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63f93c67b2005a196716bd3fabff129b">&#9670;&#160;</a></span>get_params()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def motor_decoder.get_params </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompts the user to enter KP and setpoint values. </p>
<p>This function prompts the user for two values, the KP and setpoint, which are used to control the motor. It repeatedly prompts the user until valid input is entered. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Tuple of strings, containing the KP and setpoint values. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ac801afeee6b8d8caa662d6cd559ff56a" name="ac801afeee6b8d8caa662d6cd559ff56a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac801afeee6b8d8caa662d6cd559ff56a">&#9670;&#160;</a></span>datax</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">array motor_decoder.datax = array.array('f', [0] * len(databx))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Printing an error message in case of any error while reading the line. </p>
<p>Continuing to the next iteration of the loop</p>
<p>Converting the lists of bytes to arrays of float type </p>

</div>
</div>
<a id="a2515de620c7143128d6ca731b1d71f0b" name="a2515de620c7143128d6ca731b1d71f0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2515de620c7143128d6ca731b1d71f0b">&#9670;&#160;</a></span>line</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ser motor_decoder.line = ser.readline()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flushing the input buffer of the serial port. </p>
<p>A loop to continuously read the data from the serial port</p>
<p>Reading a line of data from the serial port </p>

</div>
</div>
<a id="a98187aa76cd77811e087bf1de6ca4893" name="a98187aa76cd77811e087bf1de6ca4893"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98187aa76cd77811e087bf1de6ca4893">&#9670;&#160;</a></span>timeout</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">motor_decoder.timeout</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sending user input to controller. </p>
<p>Opening the serial port 'COM4' with a baud rate of 115200 and a timeout of 7 seconds </p>

</div>
</div>
<a id="ad87600d952ece4682d2a6f134945bbd1" name="ad87600d952ece4682d2a6f134945bbd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad87600d952ece4682d2a6f134945bbd1">&#9670;&#160;</a></span>try</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">motor_decoder.try :</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checking if the line read is equal to 'end'. </p>
<p>Breaking the loop if 'end' is received </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="motor__decoder_8py.html">motor_decoder.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
